(function(){var i,d,n,o,r=[].slice;d=window.jQuery,n=window,o=function(){function t(t){var e;this.data_attribute="data-intro",this.chardinCssClasses=["chardinjs-helper-layer","chardinjs-show-element","chardinjs-relative-position"],this.$el=d(t),this.sequenced=!!this.$el.data("chardin-sequenced"),this.sequencedItems=this._getSequencedElements(),this.sequenceIdx=0,this.active=!1,this.timeOut=null,this.isAuto=!!this.$el.data("chardin-auto"),this.delayTime=this.$el.data("chardin-delay")||2e3,d(n).resize((e=this,function(){return e.refresh()}))}return t.prototype.start=function(){var t,e,i,s;if(this._overlay_visible())return!1;if(this._add_overlay_layer(),this.sequenced)this.sequenceIdx=0,this._show_sequenced_element();else for(e=0,i=(s=this.$el.find("*["+this.data_attribute+"]:visible")).length;e<i;e++)t=s[e],this._show_element(t);return this.active=!0,this.$el.trigger("chardinJs:start")},t.prototype.toggle=function(){return this._overlay_visible()?this.stop():this.start()},t.prototype.refresh=function(){var t,e,i,s,n;if(this._overlay_visible()){for(n=[],e=0,i=(s=this.$el.find("*["+this.data_attribute+"]:visible")).length;e<i;e++)t=s[e],n.push(this._position_helper_layer(t));return n}return this},t.prototype.stop=function(){var t,e,i,s;for(this.active=!1,this._remove_overlay_layer(),this.$el.find(".chardinjs-helper-layer").remove(),e=0,i=(s=this.chardinCssClasses).length;e<i;e++)t=s[e],this._remove_classes(t);return n.removeEventListener?n.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this.sequenceIdx=0,this.$el.trigger("chardinJs:stop")},t.prototype._remove_classes=function(t){return this.$el.find("."+t).removeClass(t)},t.prototype.set_data_attribute=function(t){return this.data_attribute=t},t.prototype.set_data_helptext=function(t){return this.data_helptext=t},t.prototype._overlay_visible=function(){return 0!==this.$el.find(".chardinjs-overlay").length},t.prototype._add_overlay_layer=function(){var t="",e=this;if(this._overlay_visible())return!1;(i=document.createElement("div")).id="chardin-mask",element_position=this._get_offset(this.$el.get()[0]),element_position&&(d("*").filter(function(){return"fixed"==d(this).css("position")}).each(function(){d(this)[0].className+=" chardinjs-no-fixed"}),i.className="chardinjs-overlay","BODY"===this.$el.prop("tagName").toUpperCase()?t+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;":t+="width: "+element_position.width+"px; height:"+element_position.height+"px; top:"+element_position.top+"px;left: "+element_position.left+"px;",i.setAttribute("style",t)),this.$el.get()[0].appendChild(i),this.$el.find("#chardin-mask").fadeIn(),i.onclick=function(t){return e.sequenced?e._handleMouseClick(t):e.stop()}},t.prototype._remove_overlay_layer=function(){this.$el.find(".chardinjs-helper-layer").remove(),this.$el.find(".chardinjs-show-element").removeClass("chardinjs-show-element"),this.$el.find(".chardinjs-relative-position").removeClass("chardinjs-relative-position"),this.$el.find(".chardinjs-no-fixed").removeClass("chardinjs-no-fixed"),this.$el.find("#chardin-mask").fadeOut(function(){return d(this).remove()})},t.prototype._position_overlay_layer=function(t){if(t.className+=" chardinjs-show-element "+this._get_css_attribute(t),current_element_position="",t.currentStyle?current_element_position=t.currentStyle.position:document.defaultView&&document.defaultView.getComputedStyle&&(current_element_position=document.defaultView.getComputedStyle(t,null).getPropertyValue("position")),current_element_position=current_element_position.toLowerCase(),"absolute"!==current_element_position&&"relative"!==current_element_position)return t.className+=" chardinjs-relative-position"},t.prototype._get_position=function(t){var e,i,s=t.getAttribute(this.data_attribute);return null==(e="#"==s[0]&&this.data_helptext[s].position?this.data_helptext[s].position:t.getAttribute("data-position"))?"bottom":null!=(i=e.split(":"))?i[0]:e},t.prototype._get_position_offset=function(t){var e,i,s=t.getAttribute(this.data_attribute);return null==(e="#"==s[0]&&this.data_helptext[s].position?this.data_helptext[s].position:t.getAttribute("data-position"))?1:1+parseInt((null!=(i=e.split(":"))?(i[1]||"").split(",")[0]:void 0)||0,10)/100},t.prototype._get_position_distance=function(t){var e,i,s=t.getAttribute(this.data_attribute);return null==(e="#"==s[0]&&this.data_helptext[s].position?this.data_helptext[s].position:t.getAttribute("data-position"))?100:parseInt((null!=(i=e.split(":"))?(i[1]||"").split(",")[1]:void 0)||100,10)},t.prototype._get_css_attribute=function(t){var e,i,s,n,o;if((o=t.getAttribute(this.data_attribute+"-css")||"")&&1<String(o).replace(/\s/g,"").length)for(s=0,n=(i=o.split(" ").filter(function(t){return 0!==t.length})).length;s<n;s++)e=i[s],this._add_css_attribute(e);return o},t.prototype._add_css_attribute=function(t){if(-1<!d.inArray(t,this.chardinCssClasses))return this.chardinCssClasses.push(t)},t.prototype._getStyle=function(t,e,i){return n.getComputedStyle?n.getComputedStyle(t,i).getPropertyValue(e):t.currentStyle[e]},t.prototype._place_tooltip=function(t,e){var i,s,n,o,r,a,h,l;switch(l=this._get_offset(e),e.style.top=null,e.style.right=null,e.style.bottom=null,e.style.left=null,o=this._get_position(t),n=this._get_position_distance(t),e.className+=" chardinjs-distance-"+n,n=n/100-1,o){case"top":case"bottom":return a=this._get_offset(t).width,my_width=parseFloat(this._getStyle(e,"width")),e.style.left=a/2*this._get_position_offset(t)-l.width/2+"px",my_width&&d(e).width(my_width),e.style[o]="-"+(l.height+30*n)+"px";case"left":case"right":return h=parseFloat(this._getStyle(e,"max-width")),e.style[o]="-"+h+"px",r=this._get_offset(t).height,(i=parseFloat(this._getStyle(e,"height")))&&d(e).height(i),e.style.top=r/2*this._get_position_offset(t)-i/2+"px",s=185-(h-parseFloat(this._getStyle(e,"width")))+30*n,e.style[o]="-"+s+"px"}},t.prototype._position_helper_layer=function(t){var e,i;if(i=d(t).data("helper_layer"),e=this._get_offset(t),d(t).is(":visible")&&i&&i.setAttribute("style","display: block; width: "+e.width+"px; height:"+e.height+"px; top:"+e.top+"px; left: "+e.left+"px;"),d(t).is(":visible")&&!i&&this._show_element(t),!d(t).is(":visible")&&i)return i.setAttribute("style","display: none; width: "+e.width+"px; height:"+e.height+"px; top:"+e.top+"px; left: "+e.left+"px;")},t.prototype._remove_sequenced_element=function(){this.$el.find(".chardinjs-helper-layer").remove(),this.$el.find(".chardinjs-show-element").removeClass("chardinjs-show-element"),this.$el.find(".chardinjs-relative-position").removeClass("chardinjs-relative-position")},t.prototype._show_element=function(t){var e,i;e=document.createElement("div"),i=document.createElement("div");var s=t.getAttribute(this.data_attribute);if("#"==s[0]){var n=this.data_helptext[s];if(!n)return!1;i.innerHTML="<div class='chardinjs-tooltiptext'>"+n.text+"</div>"}else i.innerHTML="<div class='chardinjs-tooltiptext'>"+s+"</div>";d(t).data("helper_layer",e).data("tooltip_layer",i),t.id&&e.setAttribute("data-id",t.id),e.className="chardinjs-helper-layer chardinjs-"+this._get_position(t),this._position_helper_layer(t),this.$el.get()[0].appendChild(e),i.className="chardinjs-tooltip chardinjs-"+this._get_position(t),e.appendChild(i),this._place_tooltip(t,i);var o=this;return e.onclick=function(t){return o.sequenced?o._handleMouseClick(t):o.stop()},this._position_overlay_layer(t),o.sequenced&&i.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),!0},t.prototype._show_sequenced_element=function(){var t=this;if(this.sequenceIdx<0&&(this.sequenceIdx=0),!this.sequencedItems[this.sequenceIdx])return this.stop();for(;!this._show_element(this.sequencedItems[this.sequenceIdx]);)this.sequenceIdx++;if(this.sequenceIdx<this.sequencedItems.length-1){if(this.isAuto)return this.timeOut=setTimeout(function(){return t.next(t.isAuto)},this.delayTime)}else if(this.isAuto)return this.timeOut=setTimeout(function(){return t.stop()},this.delayTime)},t.prototype.next=function(t){var e=this;return t=!1!==t,this.sequenceIdx++,t?(clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){return e._remove_sequenced_element(),e._show_sequenced_element(!0),e.$el.trigger("chardinJs:next")},this.delayTime)):(this._remove_sequenced_element(),this._show_sequenced_element(!1),this.$el.trigger("chardinJs:next"))},t.prototype.previous=function(t){var e=this;return t=!1!==t,this.sequenceIdx--,t?(clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){return e._remove_sequenced_element(),e._show_sequenced_element(!0),e.$el.trigger("chardinJs:previous")},this.delayTime)):(this._remove_sequenced_element(),this._show_sequenced_element(!1),this.$el.trigger("chardinJs:previous"))},t.prototype._handleMouseClick=function(t){if(this.active)return size=this._getMaxSize(),(t=t||n.event).shiftKey?this.previous(!1):this.next(!1)},t.prototype._getMaxSize=function(){var t,e,i;return t=document.body,i=document.documentElement,e=Math.max(t.scrollHeight,t.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight),{width:Math.max(t.scrollWidth,t.offsetWidth,i.clientWidth,i.scrollWidth,i.offsetWidth),height:e}},t.prototype._getSequencedElements=function(){return this.$el.find("*["+this.data_attribute+"]:visible").sort(function(t,e){return(d(t).data("sequence")||100)-(d(e).data("sequence")||100)})},t.prototype._get_offset=function(t){var e,i,s;for(s={width:t.offsetWidth,height:t.offsetHeight},i=e=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return s.top=i,s.left=e,s},t}(),d.fn.extend({chardinJs:function(t){var e,i,s,n;return n=t,i=2<=arguments.length?r.call(arguments,1):[],e=d(this[0]),(s=e.data("chardinJs"))||e.data("chardinJs",s=new o(this,n)),"string"==typeof n?s[n].apply(s,i):"object"==typeof n&&("string"==typeof n.attribute&&s.set_data_attribute(n.attribute),"string"==typeof n.method&&s[n.method].apply(s,i),"string"==typeof n.url&&d.ajax({type:"GET",url:n.url,dataType:"json",success:function(t){s.set_data_helptext(t)}})),s}})}).call(this);